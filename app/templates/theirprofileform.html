{% extends 'base.html' %}

{% block body %}

    <h1>Register</h1>
    <!--enctype is needed to upload files -->
    <form action="" method="post" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <p>
            {{ form.fname.label }}<br>
            {{ form.fname(size=64) }}<br>
            {% for error in form.fname.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>
            {{ form.lname.label }}<br>
            {{ form.lname() }}<br>
            {% for error in form.lname.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <!--Edit profileform.html to include the role field-->
        <p>
            {{ form.username.label }}<br>
            {{ form.username() }}<br>
            {% for error in form.username.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>
            {{ form.role.label }}<br>
            {{ form.role() }}<br>
            {% for error in form.role.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>
            {{ form.purpose.label }}<br>
            {{ form.purpose() }}<br>
            {% for error in form.purpose.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>

        <p>
            {{ form.image.label }}<br>
            {% if user.image %}
                <img class="img-thumbnail" width="100" src="data:image;base64,{{base64encode(user.image.read())}}"> <br>
            {% else %}
                <img class="img-thumbnail" width = "100" src="/static/bdog.png">
            {% endif %} <br>
            {{ form.image() }}<br>
            {% for error in form.image.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>

        {% if current_user.email == "s_ahmed.alowmari@ousd.org" %}
            <p>
                {{ form.qRizztriction.label}}
                {{ form.qRizztriction() }}<br>
                {% for error in form.qRizztriction.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>
                {{ form.cRizztriction.label}}
                {{ form.cRizztriction() }}<br>
                {% for error in form.cRizztriction.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
        {% endif %}
        
        <p>{{ form.submit() }}</p>
    </form>

{% endblock %}
